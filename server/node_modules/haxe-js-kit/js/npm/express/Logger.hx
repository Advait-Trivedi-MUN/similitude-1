package js.npm.express;;

class Logger
{
    /**
	* A simple logger.
	*/

    private static var error_type:String = "[ERROR]";
    private static var debug_type:String = "[DEBUG]";
    private static var info_type:String = "[INFO]";


    public static function info(msg:Dynamic, ?pos : haxe.PosInfos)
    {
        Logger.doTrace(info_type, msg, pos);
    }

    public static function debug(msg:Dynamic, ?pos : haxe.PosInfos)
    {
        Logger.doTrace(debug_type, msg, pos);
    }

    public static function error(msg:Dynamic, ?pos : haxe.PosInfos)
    {
        Logger.doTrace(error_type, msg, pos);
    }

    private static function doTrace(logtype:String, msg:Dynamic, ?pos : haxe.PosInfos)
    {
        var toTrace:String = logtype + " " + pos.fileName + " " + pos.lineNumber + " " + pos.methodName + "() " + msg;
        #if flash
			if (haxe.Firebug.detect()) {
				haxe.Firebug.trace(toTrace);
			} else
			{
				flash.Lib.trace(toTrace);
			}
		#elseif js
			var id = "haxe:trace";
			var sep = "\n<br>";
			var d = js.Lib.document.getElementById(id);
			if( d == null )
				js.Lib.alert("Unknown element : " + id);
			d.innerHTML += toTrace + sep;
		#end

    }

}